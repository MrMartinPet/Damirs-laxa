<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Vikingatiden – Träningsapp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #f5f7fb;
      --card-bg: #ffffff;
      --primary: #1a73e8;
      --primary-light: #e3f2fd;
      --text: #222222;
      --muted: #555555;
      --border: #cbd5e1;
      --correct: #2e7d32;
      --wrong: #c62828;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .app {
      max-width: 520px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 14px 12px 10px;
      background: #ffffff;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      margin: 0 0 4px;
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 0.01em;
    }

    header p {
      margin: 0 0 8px;
      font-size: 13px;
      color: var(--muted);
    }

    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .tab-btn {
      flex: 1 1 45%;
      border: 1px solid var(--border);
      background: #f9fafb;
      border-radius: 999px;
      padding: 10px 12px;
      font-size: 14px;
      cursor: pointer;
      text-align: center;
    }

    .tab-btn.active {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
      font-weight: 600;
    }

    main {
      flex: 1;
      padding: 12px 10px 20px;
    }

    section {
      display: none;
    }

    section.active {
      display: block;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      margin: 4px 4px 8px;
    }

    .hint {
      font-size: 13px;
      color: var(--muted);
      margin: 0 4px 12px;
    }

    .card-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .card {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 12px 12px 10px;
      box-shadow: 0 1px 4px rgba(15, 23, 42, 0.06);
      border: 1px solid rgba(148,163,184,0.5);
    }

    .flashcard {
      cursor: pointer;
      position: relative;
    }

    .flash-main {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .flash-sub {
      font-size: 13px;
      color: var(--muted);
    }

    .flash-back {
      display: none;
      font-size: 14px;
      line-height: 1.35;
    }

    .flashcard.flipped .flash-main,
    .flashcard.flipped .flash-sub {
      display: none;
    }

    .flashcard.flipped .flash-back {
      display: block;
    }

    .flash-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--primary);
      margin-bottom: 6px;
    }

    .q-text {
      font-size: 15px;
      margin-bottom: 6px;
      line-height: 1.4;
    }

    .answer {
      display: none;
      font-size: 14px;
      color: var(--muted);
      margin-top: 6px;
    }

    .card.show-answer .answer {
      display: block;
    }

    .small-btn-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .small-btn {
      border-radius: 999px;
      border: 1px solid var(--border);
      padding: 8px 16px;
      font-size: 14px;
      background: #f9fafb;
      cursor: pointer;
    }

    .small-btn.primary {
      background: var(--primary);
      border-color: var(--primary);
      color: #fff;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--primary-light);
      color: var(--primary);
      margin-bottom: 6px;
    }

    .tf-buttons {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .tf-btn {
      flex: 1;
      padding: 10px 0;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #f9fafb;
      font-size: 14px;
      cursor: pointer;
    }

    .tf-btn.correct {
      border-color: var(--correct);
      background: #e8f5e9;
      color: var(--correct);
      font-weight: 600;
    }

    .tf-btn.wrong {
      border-color: var(--wrong);
      background: #ffebee;
      color: var(--wrong);
      font-weight: 600;
    }

    .tf-feedback {
      font-size: 13px;
      margin-top: 6px;
      display: none;
      line-height: 1.35;
    }

    .card.show-feedback .tf-feedback {
      display: block;
    }

    .tf-feedback.correct {
      color: var(--correct);
    }

    .tf-feedback.wrong {
      color: var(--wrong);
    }

    .talk-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .talk-q {
      font-size: 15px;
      margin-bottom: 4px;
      line-height: 1.4;
    }

    .talk-note {
      font-size: 13px;
      color: var(--muted);
    }

    .read-card-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .read-text {
      font-size: 14px;
      line-height: 1.45;
    }

    .spell-feedback {
      margin-top: 8px;
      font-size: 14px;
    }

    .spell-feedback.correct {
      color: var(--correct);
    }

    .spell-feedback.wrong {
      color: var(--wrong);
    }

    .spell-input-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .spell-input-row input {
      flex: 1;
      padding: 8px 10px;
      font-size: 16px;
      border-radius: 999px;
      border: 1px solid var(--border);
      outline: none;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background: #020617;
        color: #e5e7eb;
      }
      header {
        background: #020617;
        box-shadow: 0 1px 0 rgba(148,163,184,0.4);
      }
      .tab-btn {
        background: #020617;
        color: #e5e7eb;
      }
      .tab-btn.active {
        background: var(--primary);
        color: #fff;
      }
      .card {
        background: #020617;
        border-color: rgba(148,163,184,0.6);
        box-shadow: 0 1px 4px rgba(15,23,42,0.8);
      }
      .small-btn,
      .tf-btn {
        background: #020617;
        color: #e5e7eb;
      }
      .spell-input-row input {
        background: #020617;
        color: #e5e7eb;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <h1>Vikingatiden</h1>
    <p>Träna ord, frågor och läsa text.</p>
    <div class="tabs">
      <button class="tab-btn active" onclick="showSection('text', this)">Läs om vikingatiden</button>
      <button class="tab-btn" onclick="showSection('fragor', this)">Instuderingsfrågor</button>
      <button class="tab-btn" onclick="showSection('santfalskt', this)">Sant eller falskt</button>
      <button class="tab-btn" onclick="showSection('ordlista', this)">Ordlista</button>
      <button class="tab-btn" onclick="showSection('stavning', this)">Stava ord</button>
      <button class="tab-btn" onclick="showSection('begrepp', this)">Begrepp</button>
      <button class="tab-btn" onclick="showSection('prata', this)">Prata-frågor</button>
    </div>
  </header>

  <main>
    <!-- LÄSA: LÖPANDE TEXT, UPPDELAD I KORT -->
    <section id="text" class="active">
      <h2 class="section-title">Läs om vikingatiden</h2>
      <p class="hint">Läs ett kort i taget. Pausa och prata om orden.</p>
      <div class="card-list">
        <div class="card">
          <div class="read-card-title">När började vikingatiden?</div>
          <div class="read-text">
            Vikingatiden började år 793 efter Kristus. Då attackerade vikingar ett
            kloster som hette Lindisfarne i England. Klostret låg vid havet och hade
            mycket skatter. Efter den händelsen blev många människor i Europa
            rädda för de nordiska sjöfararna.
          </div>
        </div>

        <div class="card">
          <div class="read-card-title">Var bodde vikingarna?</div>
          <div class="read-text">
            Vikingarna bodde i de länder som vi idag kallar Sverige, Norge och
            Danmark. Tillsammans kallas området Norden. Många vikingar var
            bönder. Det fanns också hantverkare, fiskare och duktiga båtbyggare.
          </div>
        </div>

        <div class="card">
          <div class="read-card-title">Vikingarnas båtar</div>
          <div class="read-text">
            Vikingarna använde långa och smala båtar som kallades långskepp.
            De kunde segla fort över haven. Båtarna vägde inte så mycket, därför
            kunde vikingarna dra upp dem på land om det behövdes eller om det
            var grunt vatten.
          </div>
        </div>

        <div class="card">
          <div class="read-card-title">Olika sorters vikingar</div>
          <div class="read-text">
            Det fanns olika grupper av vikingar:
            <br><br>
            • <strong>Plundrare</strong> – krigare som attackerade platser och tog guld, silver
            och andra rikedomar.<br>
            • <strong>Handelsmän</strong> – bytte varor, till exempel pälsar och järn, mot silver,
            kryddor och tyger.<br>
            • <strong>Upptäcktsresande</strong> – reste långt bort, till exempel till Island, och
            flyttade dit.<br>
            • <strong>Legosoldater</strong> – krigade för en kung eller kejsare och arbetade som
            livvakter.
          </div>
        </div>

        <div class="card">
          <div class="read-card-title">Birka – handelsstad</div>
          <div class="read-text">
            Birka låg på en ö i Mälaren, nära dagens Stockholm. Birka var en tidig
            stad i Norden och en viktig handelsplats. Handelsmän från många
            länder kom dit för att byta varor. Forskare har hittat silvermynt, pärlor
            och tyger som visar hur viktig Birka var.
          </div>
        </div>

        <div class="card">
          <div class="read-card-title">Uppåkra – plats för en hövding</div>
          <div class="read-text">
            Uppåkra ligger i Skåne i södra Sverige. Platsen var viktig under lång
            tid, även före vikingatiden. Troligen bodde en mäktig hövding eller
            kung där. Forskare har hittat guld, smycken och ett stort hus som
            kallas en hall. I hallen hade man fester och viktiga möten.
          </div>
        </div>

        <div class="card">
          <div class="read-card-title">Gravar på vikingatiden</div>
          <div class="read-text">
            På vikingatiden kunde gravar se olika ut. Vissa var stora högar av jord
            och sten. Andra gravar hade stenar som stod i formen av ett skepp.
            Gravarna berättar att släkten var viktig och att vissa personer hade
            mycket makt.
          </div>
        </div>
      </div>
    </section>

    <!-- INSTUDERINGSFRÅGOR -->
    <section id="fragor">
      <h2 class="section-title">Instuderingsfrågor</h2>
      <p class="hint">Läs frågan. Svara själv först. Tryck sedan på “Visa svar”.</p>
      <div class="card-list" id="fragor-list"></div>
    </section>

    <!-- SANT / FALSKT -->
    <section id="santfalskt">
      <h2 class="section-title">Sant eller falskt</h2>
      <p class="hint">Läs påståendet. Välj Sant eller Falskt.</p>
      <div class="card-list" id="santfalskt-list"></div>
    </section>

    <!-- ORDLISTA (20 ord från bildstöd) -->
    <section id="ordlista">
      <h2 class="section-title">Ordlista</h2>
      <p class="hint">Tryck på ett ord för att se en kort förklaring.</p>
      <div class="card-list" id="ordlista-list"></div>
    </section>

    <!-- STAVA ORD (egen sida, utan att visa orden) -->
    <section id="stavning">
      <h2 class="section-title">Stava ord</h2>
      <p class="hint">Tryck på “Nytt ord”. Lyssna och skriv ordet. Ingen rättstavning från telefonen.</p>
      <div class="card">
        <div class="read-card-title">Lyssna och stava</div>
        <div class="small-btn-row">
          <button class="small-btn primary" onclick="newSpellWord()">Nytt ord</button>
          <button class="small-btn" onclick="repeatSpellWord()">Lyssna igen</button>
        </div>
        <div id="spell-current-label" style="font-size:13px; color:var(--muted); margin-top:8px;">
          Inget ord valt ännu.
        </div>
        <div class="spell-input-row">
          <input id="spell-input"
                 type="text"
                 placeholder="Skriv ordet här"
                 autocomplete="off"
                 autocorrect="off"
                 autocapitalize="off"
                 spellcheck="false">
          <button class="small-btn primary" onclick="checkSpelling()">Kolla</button>
        </div>
        <div id="spell-feedback" class="spell-feedback"></div>
      </div>
    </section>

    <!-- BEGREPP (övriga) -->
    <section id="begrepp">
      <h2 class="section-title">Begrepp</h2>
      <p class="hint">Tryck på ett begrepp för att se en enkel förklaring.</p>
      <div class="card-list" id="begrepp-list"></div>
    </section>

    <!-- PRATA-FRÅGOR -->
    <section id="prata">
      <h2 class="section-title">Prata-frågor</h2>
      <p class="hint">Öva muntligt med en kompis eller vuxen.</p>
      <div class="talk-list" id="prata-list"></div>
    </section>
  </main>
</div>

<script>
  // -------- Navigation between sections --------
  function showSection(id, btn) {
    document.querySelectorAll("section").forEach(sec => {
      sec.classList.toggle("active", sec.id === id);
    });
    document.querySelectorAll(".tab-btn").forEach(b => {
      b.classList.toggle("active", b === btn);
    });
    window.scrollTo({ top: 0, behavior: "auto" });
  }

  // -------- Simple feedback sounds (Web Audio) --------
  let audioCtx = null;

  function playFeedback(isCorrect) {
    try {
      if (!audioCtx) {
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        if (!AudioContext) return;
        audioCtx = new AudioContext();
      }
      const duration = 0.18;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = "sine";
      osc.frequency.value = isCorrect ? 880 : 220;
      gain.gain.value = 0.2;

      osc.connect(gain);
      gain.connect(audioCtx.destination);

      const now = audioCtx.currentTime;
      osc.start(now);
      osc.stop(now + duration);
    } catch (e) {
      // inget om ljud inte funkar
    }
  }

  // -------- Talsyntes för stavning --------
  function speakWord(word) {
    if (!word) return;
    if ('speechSynthesis' in window) {
      const utterance = new SpeechSynthesisUtterance(word);
      utterance.lang = 'sv-SE';
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utterance);
    }
  }

  // -------- Data --------
  // 20 ord från ordlistan (bildstöd)
  const ordlistaData = [
    { word: "viking", explain: "En person från Norden som levde på vikingatiden och ofta reste med båt." },
    { word: "Norden", explain: "Område i norra Europa där bland annat Sverige, Norge och Danmark ligger." },
    { word: "långskepp", explain: "Lång, smal vikingabåt som var snabb och lätt att styra och dra upp på land." },
    { word: "arkeolog", explain: "Person som forskar om hur människor levde förr genom att gräva fram saker." },
    { word: "fynd", explain: "En sak man hittar, ofta gammal och spännande." },
    { word: "självhushållning", explain: "När en familj eller gård mest använder sådant de själva odlar och gör." },
    { word: "träl", explain: "En ofri person på vikingatiden, ungefär som en slav." },
    { word: "långhus", explain: "Ett långt trähus där människor och ibland djur kunde bo tillsammans." },
    { word: "byteshandel", explain: "När man byter saker med varandra i stället för att betala med pengar." },
    { word: "gravfält", explain: "Ett område med många gravar på samma plats." },
    { word: "Birka", explain: "Stor handelsplats på en ö i Mälaren. Kallas ibland Nordens första stad." },
    { word: "missionär", explain: "Person som reser för att sprida sin religion, till exempel kristendomen." },
    { word: "handelsplats", explain: "Plats där människor köper och säljer saker." },
    { word: "mytologi", explain: "Gamla berättelser om gudar och hjältar." },
    { word: "offer", explain: "Gåva till en gud, till exempel mat eller saker." },
    { word: "runor", explain: "Vikingarnas bokstäver och skrivtecken." },
    { word: "historiebruk", explain: "När vi använder historia för att berätta eller förklara något idag." },
    { word: "järn", explain: "Ett hårt metallämne som man gör verktyg och vapen av." },
    { word: "segel", explain: "Stort tyg på båten som tar tag i vinden." },
    { word: "runsten", explain: "Stor sten med runor, ofta rest till minne av en person." }
  ];

  // Övriga begrepp, utöver ordlistan
  const begreppData = [
    { term: "plundrare", explain: "Vikingar som attackerade och tog rikedomar som guld och silver." },
    { term: "handelsmän", explain: "Vikingar som bytte och sålde varor, till exempel pälsar och järn." },
    { term: "upptäcktsresande", explain: "Vikingar som reste långt bort och ibland bosatte sig på nya platser." },
    { term: "legosoldater", explain: "Krigare som arbetade åt en kung eller kejsare och fick betalt." },
    { term: "Uppåkra", explain: "Viktig plats i Skåne där en mäktig hövding troligen bodde." },
    { term: "hall", explain: "Stort hus där hövdingen hade fester och viktiga möten." }
  ];

  const fragorData = [
    {
      q: "1. Vilken händelse och vilket år “startade” vikingatiden?",
      a: "När vikingar attackerade klostret Lindisfarne år 793 efter Kristus."
    },
    {
      q: "2. Från vilka av dagens länder kom vikingarna?",
      a: "Från Sverige, Norge och Danmark."
    },
    {
      q: "3. Vilka var de 4 stora grupperna som vikingarna bestod av?",
      a: "Plundrare, handelsmän, upptäcktsresande och legosoldater."
    },
    {
      q: "4. Vad kallades vikingarnas båtar och vad var speciellt med dessa?",
      a: "De kallades långskepp. De var långa, smala, lätta och kunde dras upp på land."
    },
    {
      q: "5. Vilka var de två största bosättningarna i “Sverige” på vikingatiden?",
      a: "Birka i Mälaren och Uppåkra i Skåne."
    },
    {
      q: "6. Hur kunde gravarna se ut på vikingatiden?",
      a: "Till exempel som stora gravhögar eller stenar som bildar formen av ett skepp."
    }
  ];

  const santFalsktData = [
    {
      text: "De flesta vikingarna kom från dagens Finland.",
      correct: false,
      explain: "Falskt. De flesta kom från Sverige, Norge och Danmark."
    },
    {
      text: "Många vikingar kallade sig själva “svenskar, danskar eller norrmän”.",
      correct: false,
      explain: "Falskt. De bodde där, men såg sig mer som nordbor eller från en viss by eller hövding."
    },
    {
      text: "Runstenar restes bland annat till minne av döda släktingar.",
      correct: true,
      explain: "Sant. Ofta berättar runstenar om en person som har dött."
    },
    {
      text: "Vikingarnas båtar – långskeppen – var särskilt lämpade för grunt vatten.",
      correct: true,
      explain: "Sant. De var lätta och kunde segla där det var grunt och dras upp på land."
    },
    {
      text: "Birka och Uppåkra låg i det som vi idag kallar Skåne.",
      correct: false,
      explain: "Falskt. Uppåkra ligger i Skåne, men Birka låg i Mälaren nära Stockholm."
    },
    {
      text: "De flesta vikingarna var bönder.",
      correct: true,
      explain: "Sant. De flesta levde på jordbruk och bodde hemma på gårdar."
    }
  ];

  const prataData = [
    "Varför var släkten så viktig på vikingatiden? Är släkten lika viktig idag?",
    "Hur kunde vikingarna klara sig utan pengar? Skulle du klara dig utan pengar? Varför / varför inte?",
    "Vilket är smartast i längden – att plundra eller att handla med sina grannar? Motivera.",
    "Vilka skillnader och likheter kan du se mellan vår tid och vikingatiden?"
  ];

  // -------- Render functions --------
  function renderFragor() {
    const container = document.getElementById("fragor-list");
    container.innerHTML = "";
    fragorData.forEach(item => {
      const card = document.createElement("div");
      card.className = "card";

      const badge = document.createElement("div");
      badge.className = "badge";
      badge.textContent = "Fråga";

      const q = document.createElement("div");
      q.className = "q-text";
      q.textContent = item.q;

      const answer = document.createElement("div");
      answer.className = "answer";
      answer.textContent = "Svar: " + item.a;

      const btnRow = document.createElement("div");
      btnRow.className = "small-btn-row";

      const showBtn = document.createElement("button");
      showBtn.className = "small-btn primary";
      showBtn.textContent = "Visa svar";
      showBtn.onclick = () => {
        card.classList.toggle("show-answer");
        showBtn.textContent = card.classList.contains("show-answer")
          ? "Göm svar"
          : "Visa svar";
      };

      btnRow.appendChild(showBtn);

      card.appendChild(badge);
      card.appendChild(q);
      card.appendChild(btnRow);
      card.appendChild(answer);

      container.appendChild(card);
    });
  }

  function renderSantFalskt() {
    const container = document.getElementById("santfalskt-list");
    container.innerHTML = "";
    santFalsktData.forEach(item => {
      const card = document.createElement("div");
      card.className = "card";

      const badge = document.createElement("div");
      badge.className = "badge";
      badge.textContent = "Sant eller falskt";

      const text = document.createElement("div");
      text.className = "q-text";
      text.textContent = item.text;

      const btnRow = document.createElement("div");
      btnRow.className = "tf-buttons";

      const btnSant = document.createElement("button");
      btnSant.className = "tf-btn";
      btnSant.textContent = "Sant";

      const btnFalskt = document.createElement("button");
      btnFalskt.className = "tf-btn";
      btnFalskt.textContent = "Falskt";

      const feedback = document.createElement("div");
      feedback.className = "tf-feedback";
      feedback.textContent = item.explain;

      function handle(choice) {
        card.classList.add("show-feedback");

        const isCorrect =
          (choice === "sant" && item.correct) ||
          (choice === "falskt" && !item.correct);

        btnSant.classList.remove("correct", "wrong");
        btnFalskt.classList.remove("correct", "wrong");
        feedback.classList.remove("correct", "wrong");

        if (item.correct) {
          btnSant.classList.add("correct");
          btnFalskt.classList.add("wrong");
        } else {
          btnSant.classList.add("wrong");
          btnFalskt.classList.add("correct");
        }

        if (isCorrect) {
          feedback.classList.add("correct");
        } else {
          feedback.classList.add("wrong");
        }

        playFeedback(isCorrect);
      }

      btnSant.onclick = () => handle("sant");
      btnFalskt.onclick = () => handle("falskt");

      btnRow.appendChild(btnSant);
      btnRow.appendChild(btnFalskt);

      card.appendChild(badge);
      card.appendChild(text);
      card.appendChild(btnRow);
      card.appendChild(feedback);

      container.appendChild(card);
    });
  }

  function renderOrdlista() {
    const container = document.getElementById("ordlista-list");
    container.innerHTML = "";
    ordlistaData.forEach(item => {
      const card = document.createElement("div");
      card.className = "card flashcard";
      card.onclick = () => card.classList.toggle("flipped");

      const label = document.createElement("div");
      label.className = "flash-label";
      label.textContent = "Ord";

      const frontMain = document.createElement("div");
      frontMain.className = "flash-main";
      frontMain.textContent = item.word;

      const frontSub = document.createElement("div");
      frontSub.className = "flash-sub";
      frontSub.textContent = "Tryck för förklaring.";

      const back = document.createElement("div");
      back.className = "flash-back";
      back.textContent = item.explain;

      card.appendChild(label);
      card.appendChild(frontMain);
      card.appendChild(frontSub);
      card.appendChild(back);

      container.appendChild(card);
    });
  }

  function renderBegrepp() {
    const container = document.getElementById("begrepp-list");
    container.innerHTML = "";
    begreppData.forEach(item => {
      const card = document.createElement("div");
      card.className = "card flashcard";
      card.onclick = () => card.classList.toggle("flipped");

      const label = document.createElement("div");
      label.className = "flash-label";
      label.textContent = "Begrepp";

      const frontMain = document.createElement("div");
      frontMain.className = "flash-main";
      frontMain.textContent = item.term;

      const frontSub = document.createElement("div");
      frontSub.className = "flash-sub";
      frontSub.textContent = "Tryck för förklaring.";

      const back = document.createElement("div");
      back.className = "flash-back";
      back.textContent = item.explain;

      card.appendChild(label);
      card.appendChild(frontMain);
      card.appendChild(frontSub);
      card.appendChild(back);

      container.appendChild(card);
    });
  }

  function renderPrata() {
    const container = document.getElementById("prata-list");
    container.innerHTML = "";
    prataData.forEach((text, i) => {
      const card = document.createElement("div");
      card.className = "card";

      const q = document.createElement("div");
      q.className = "talk-q";
      q.textContent = (i + 1) + ". " + text;

      const note = document.createElement("div");
      note.className = "talk-note";
      note.textContent = "Prata om frågan tillsammans. Förklara hur du tänker.";

      card.appendChild(q);
      card.appendChild(note);
      container.appendChild(card);
    });
  }

  // -------- Stavningsträning --------
  let currentSpellWord = null;

  function newSpellWord() {
    const index = Math.floor(Math.random() * ordlistaData.length);
    currentSpellWord = ordlistaData[index].word;
    const label = document.getElementById("spell-current-label");
    const input = document.getElementById("spell-input");
    const feedback = document.getElementById("spell-feedback");

    label.textContent = "Lyssna på ordet och skriv hur det stavas.";
    input.value = "";
    feedback.textContent = "";
    feedback.className = "spell-feedback";

    speakWord(currentSpellWord);
  }

  function repeatSpellWord() {
    if (!currentSpellWord) return;
    speakWord(currentSpellWord);
  }

  function checkSpelling() {
    if (!currentSpellWord) return;
    const input = document.getElementById("spell-input");
    const feedback = document.getElementById("spell-feedback");

    const user = (input.value || "").trim().toLowerCase();
    const correct = currentSpellWord.toLowerCase();

    if (!user) {
      feedback.textContent = "Skriv ordet först.";
      feedback.className = "spell-feedback wrong";
      return;
    }

    if (user === correct) {
      feedback.textContent = "Rätt! Ordet stavas: " + currentSpellWord;
      feedback.className = "spell-feedback correct";
      playFeedback(true);
    } else {
      feedback.textContent = "Inte riktigt. Ordet stavas: " + currentSpellWord;
      feedback.className = "spell-feedback wrong";
      playFeedback(false);
    }
  }

  // Init
  renderFragor();
  renderSantFalskt();
  renderOrdlista();
  renderBegrepp();
  renderPrata();
</script>
</body>
</html>
